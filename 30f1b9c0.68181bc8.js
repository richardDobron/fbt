(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{68:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return i})),n.d(t,"default",(function(){return u}));var a=n(1),r=n(6),o=(n(0),n(88)),c={id:"locale_detection",title:"Locale detection",sidebar_label:"Locale detection"},l={unversionedId:"locale_detection",id:"locale_detection",isDocsHomePage:!1,title:"Locale detection",description:"How to detect the user's locale from the browser?",source:"@site/..\\docs\\locale_detection.md",slug:"/locale_detection",permalink:"/fbt/docs/locale_detection",version:"current",lastUpdatedBy:"Richard Dobro\u0148",lastUpdatedAt:1709495229,sidebar_label:"Locale detection",sidebar:"docs",previous:{title:"Integrating into your app",permalink:"/fbt/docs/getting_started"},next:{title:"Platform Internationalization Best Practices",permalink:"/fbt/docs/best_practices"}},i=[{value:"Installation",id:"installation",children:[]},{value:"HTTP Accept-Language Header",id:"http-accept-language-header",children:[]},{value:"Fallback Locale",id:"fallback-locale",children:[]}],s={rightToc:i};function u(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h1",{id:"how-to-detect-the-users-locale-from-the-browser"},"How to detect the user's locale from the browser?"),Object(o.b)("h2",{id:"installation"},"Installation"),Object(o.b)("p",null,"To implement locale detection in your PHP project, you can use the ",Object(o.b)("inlineCode",{parentName:"p"},"HTTP2")," library. You can install it via Composer:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"composer require pear/http2\n")),Object(o.b)("h1",{id:"usage"},"Usage"),Object(o.b)("p",null,"After installing the ",Object(o.b)("inlineCode",{parentName:"p"},"HTTP2 library"),", you can utilize it in your PHP code to detect the user's locale. Here's a basic example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-php"}),"<?php\n$http = new \\HTTP2();\n\n// List of supported languages\n$supportedLanguages = [\n    'en'    => 'en_US',\n    'en-UK' => 'en_UK',\n    'de'    => 'de_DE',\n    'de-AT' => 'de_AT',\n    'cs'    => 'cs_CZ',\n    'sk'    => 'sk_SK',\n];\n\n// Detect the user's language\n$clientLanguage = $http->negotiateLanguage($supportedLanguages, $fallbackLanguage = 'en');\n\n// Get the locale for the detected language\n$locale = $supportedLanguages[$clientLanguage];\n\n// Set the detected locale\n\\fbt\\FbtConfig::set('locale', $locale);\n")),Object(o.b)("h1",{id:"explanation"},"Explanation"),Object(o.b)("h2",{id:"http-accept-language-header"},"HTTP Accept-Language Header"),Object(o.b)("p",null,"The ",Object(o.b)("inlineCode",{parentName:"p"},"negotiateLanguage()")," method works by parsing the HTTP ",Object(o.b)("inlineCode",{parentName:"p"},"Accept-Language")," header sent by the user's browser. This header contains information about the user's preferred languages in order of priority. The method then matches these languages against the provided list and returns the best match."),Object(o.b)("h2",{id:"fallback-locale"},"Fallback Locale"),Object(o.b)("p",null,"In case the user's preferred language is not available or cannot be determined, it's essential to have a fallback locale. This ensures that your application always defaults to a suitable language/locale even when the detection process fails."))}u.isMDXComponent=!0},88:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return g}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),u=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),p=u(n),b=a,g=p["".concat(c,".").concat(b)]||p[b]||d[b]||o;return n?r.a.createElement(g,l(l({ref:t},s),{},{components:n})):r.a.createElement(g,l({ref:t},s))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,c=new Array(o);c[0]=b;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:a,c[1]=l;for(var s=2;s<o;s++)c[s]=n[s];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);